!function(a){"use strict";a.BigVideo=function(b){function u(){var b=a(window).width(),c=a(window).height(),d=b/c;d<i?"video"===s?(e.width(c*i).height(c),a(f).css("top",0).css("left",-(c*i-b)/2).css("height",c),a(f+"_html5_api").css("width",c*i),a(f+"_flash_api").css("width",c*i).css("height",c)):a("#big-video-image").css({width:"auto",height:c,top:0,left:-(c*i-b)/2}):"video"===s?(e.width(b).height(b/i),a(f).css("top",-(b/i-c)/2).css("left",0).css("height",b/i),a(f+"_html5_api").css("width","100%"),a(f+"_flash_api").css("width",b).css("height",b/i)):a("#big-video-image").css({width:b,height:"auto",top:-(b/i-c)/2,left:0})}function v(){var b='<div id="big-video-control-container">';b+='<div id="big-video-control">',b+='<a href="#" id="big-video-control-play"></a>',b+='<div id="big-video-control-middle">',b+='<div id="big-video-control-bar">',b+='<div id="big-video-control-bound-left"></div>',b+='<div id="big-video-control-progress"></div>',b+='<div id="big-video-control-track"></div>',b+='<div id="big-video-control-bound-right"></div>',b+="</div>",b+="</div>",b+='<div id="big-video-control-timer"></div>',b+="</div>",b+="</div>",t.container.append(b),a("#big-video-control-container").css("display","none"),a("#big-video-control-track").slider({animate:!0,step:.01,slide:function(b,c){m=!0,a("#big-video-control-progress").css("width",c.value-.16+"%"),e.currentTime(c.value/100*e.duration())},stop:function(a,b){m=!1,e.currentTime(b.value/100*e.duration())}}),a("#big-video-control-bar").click(function(b){e.currentTime(b.offsetX/a(this).width()*e.duration())}),a("#big-video-control-play").click(function(a){a.preventDefault(),w("toggle")}),e.on("timeupdate",function(){if(!m&&e.currentTime()/e.duration()){var b=e.currentTime(),c=Math.floor(b/60),d=Math.floor(b)-60*c;d<10&&(d="0"+d);var f=e.currentTime()/e.duration()*100;a("#big-video-control-track").slider("value",f),a("#big-video-control-progress").css("width",f-.16+"%"),a("#big-video-control-timer").text(c+":"+d+"/"+j)}})}function w(b){var c=b||"toggle";"toggle"===c&&(c=n?"pause":"play"),"pause"===c?(e.pause(),a("#big-video-control-play").css("background-position","-16px"),n=!1):"play"===c&&(e.play(),a("#big-video-control-play").css("background-position","0"),n=!0)}function x(){e.play(),t.container.off("click",x)}function y(){r++,r===q.length&&(r=0),z(q[r])}function z(b){if(a(f).css("display","block"),s="video",e.src(b),n=!0,p){a("#big-video-control-container").css("display","none"),e.ready(function(){e.volume(0)});var c=!0}else a("#big-video-control-container").css("display","block"),e.ready(function(){e.volume(k)}),c=!1;a("#big-video-image").css("display","none"),a(f).css("display","block")}function A(b){a("#big-video-image").remove(),e.pause(),a(f).css("display","none"),a("#big-video-control-container").css("display","none"),s="image";var c=a('<img id="big-video-image" src='+b+" />");g.append(c),a("#big-video-image").imagesLoaded(function(){i=a("#big-video-image").width()/a("#big-video-image").height(),u()})}var e,r,s,c={useFlashForFirefox:!0,forceAutoplay:!1,controls:!0,doLoop:!1,container:a("body")},d=this,f="#big-video-vid",g=a('<div id="big-video-wrap"></div>'),i=(a(""),16/9),j=0,k=.8,l=!1,m=!1,n=!1,o=!1,p=!1,q=[],t=a.extend({},c,b);d.init=function(){if(!l){t.container.prepend(g);var b=t.forceAutoplay?"autoplay":"";e=a('<video id="'+f.substr(1)+'" class="video-js vjs-default-skin" preload="auto" data-setup="{}" '+b+" webkit-playsinline></video>"),e.css("position","absolute"),g.append(e);var c=["html5","flash"],d=navigator.userAgent.toLowerCase(),h=d.indexOf("firefox")!=-1;t.useFlashForFirefox&&h&&(c=["flash","html5"]),e=videojs(f.substr(1),{controls:!1,autoplay:!0,preload:"auto",techOrder:c}),t.controls&&v(),u(),l=!0,n=!1,t.forceAutoplay&&a("body").on("click",x),a("#big-video-vid_flash_api").attr("scale","noborder").attr("width","100%").attr("height","100%"),a(window).resize(function(){u()}),e.on("loadedmetadata",function(b){i=document.getElementById("big-video-vid_flash_api")?document.getElementById("big-video-vid_flash_api").vjs_getProperty("videoWidth")/document.getElementById("big-video-vid_flash_api").vjs_getProperty("videoHeight"):a("#big-video-vid_html5_api").prop("videoWidth")/a("#big-video-vid_html5_api").prop("videoHeight"),u();var c=Math.round(e.duration()),d=Math.floor(c/60),f=c-60*d;f<10&&(f="0"+f),j=d+":"+f}),e.on("ended",function(){t.doLoop&&(e.currentTime(0),e.play()),o&&y()})}},d.show=function(a,b){if(void 0===b&&(b={}),p=b.ambient===!0,(p||b.doLoop)&&(t.doLoop=!0),"string"==typeof a){var c=a.substring(a.lastIndexOf(".")+1);"jpg"===c||"gif"===c||"png"===c?A(a):(b.altSource&&navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&(a=b.altSource),z(a),o=!1)}else q=a,r=0,z(q[r]),o=!0},d.getPlayer=function(){return e},d.triggerPlayer=function(a){w(a)}}}(jQuery);